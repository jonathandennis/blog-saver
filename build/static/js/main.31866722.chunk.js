(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a(86)},69:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){e.exports=a.p+"static/media/Lato-Regular.2d36b1a9.ttf"},85:function(e,t,a){e.exports=a.p+"static/media/Lato-Italic.7582e823.ttf"},86:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),s=a(17),l=a.n(s),o=a(7),u=a(13),i=a(36),m=a(37),d=a(1),f=a.n(d),p=a(2),v=a(23),g=a(22),b=a(12),E=a.n(b),h="/api/blogs",_=null,N={getAll:function(){return E.a.get(h).then(function(e){return e.data})},create:function(){var e=Object(p.a)(f.a.mark(function e(t,a,n){var r,c,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:_}},c={title:t,author:a,url:n,likes:0},e.next=4,E.a.post(h,c,r);case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),setToken:function(e){_="bearer ".concat(e)},update:function(e,t){return E.a.put("".concat(h,"/").concat(e),t)},addComment:function(){var e=Object(p.a)(f.a.mark(function e(t,a){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={comment:a},e.next=3,E.a.post("".concat(h,"/").concat(t,"/comments"),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),remove:function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},e.next=3,E.a.delete("".concat(h,"/").concat(t),a);case 3:return n=e.sent,e.next=6,n.data;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";return console.log("timeoutID: ",n),function(){var a=Object(p.a)(f.a.mark(function a(r){return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r({type:"NOTIFY",data:{message:e,type:t}}),n&&clearTimeout(n),n=setTimeout(function(){r({type:"CLEAR_NOTIFICATION"})},5e3);case 3:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFY":return t.data;case"CLEAR_NOTIFICATION":return null;default:return e}},O=function(e,t,a){return function(){var n=Object(p.a)(f.a.mark(function n(r){var c;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,N.create(e,t,a);case 3:c=n.sent,r({type:"NEW_BLOG",data:c}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r(w("Error adding blog, missing content!"));case 10:case"end":return n.stop()}},n,null,[[0,7]])}));return function(e){return n.apply(this,arguments)}}()},k=function(e){var t=Object(v.a)({},e,{likes:e.likes+1});return function(){var a=Object(p.a)(f.a.mark(function a(n){var r;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.update(e.id,t);case 3:r=a.sent,n({type:"LIKE_BLOG",data:r}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n(w("Error liking blog!"));case 10:case"end":return a.stop()}},a,null,[[0,7]])}));return function(e){return a.apply(this,arguments)}}()},j=function(e,t){return function(){var a=Object(p.a)(f.a.mark(function a(n){var r;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.addComment(e,t);case 3:r=a.sent,n({type:"NEW_COMMENT",data:r,id:e}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n(w("Error, Requires content!"));case 10:case"end":return a.stop()}},a,null,[[0,7]])}));return function(e){return a.apply(this,arguments)}}()},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("state now: ",e),console.log("action now: ",t),t.type){case"INIT_BLOGS":return t.data;case"NEW_BLOG":return[].concat(Object(g.a)(e),[t.data]);case"DELETE_BLOG":return e.filter(function(e){return e.id!==t.data});case"LIKE_BLOG":var a=t.data.data.id;return e.map(function(e){return e.id!==a?e:t.data.data});case"NEW_COMMENT":var n=t.id,r=t.data;return e.map(function(e){return e.id!==n?e:Object(v.a)({},e,{comments:[].concat(Object(g.a)(e.comments),[r])})});default:return e}},S=function(){var e=window.localStorage.getItem("loggedBlogappUser");return function(){var t=Object(p.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=JSON.parse(e),N.setToken(n.token),a({type:"SET_LOGGEDUSER",data:n});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_LOGGEDUSER":case"SET_LOGGEDUSER":case"SET_LOGGEDUSERNULL":return t.data;default:return e}},T=function(){return E.a.get("/api/users").then(function(e){return e.data})},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;default:return e}},U=Object(u.combineReducers)({blogs:x,notifications:y,loggedUser:L,users:I}),C=Object(u.createStore)(U,Object(m.composeWithDevTools)(Object(u.applyMiddleware)(i.a))),G=a(16),R=a(11),D=(a(69),function(e){var t=e.loggedUser,a=e.handleLogout;return c.a.createElement("nav",{className:"navbar"},c.a.createElement("div",{className:"navbar__left"},c.a.createElement(R.b,{className:"navbar__link navbar__link--1",to:"/"},"blogs"),c.a.createElement(R.b,{className:"navbar__link navbar__link--2",to:"/users"},"users")),c.a.createElement("div",{className:"navbar__right"},c.a.createElement("em",{className:"navbar__right--user"},t.name," logged in "),c.a.createElement("button",{type:"submit",onClick:a,className:"navbar__right--btn"},"logout")))}),B=a(4),A=(a(73),function(e){var t=e.blog,a=e.loggedUser,n=Object(o.b)(),r=Object(B.f)(),s=function(e){if(window.confirm("Remove: ".concat(t.title," By: ").concat(t.author,"?")))try{n(function(e){return function(){var t=Object(p.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.remove(e);case 3:console.log("blog to delete: ",e),a({type:"DELETE_BLOG",data:e}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(w("Error deleting blog!"));case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}(e)),r.push("/"),n(w("".concat(t.title," by ").concat(t.author," was successfully deleted!"),"ok"))}catch(a){n(w("Error!"))}},l=function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{n(k(t)),n(w("Like added to: ".concat(t.title),"ok"))}catch(a){n(w("Error!"))}case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(p.a)(f.a.mark(function e(a){var r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault();try{r=a.target.comment.value,a.target.comment.value="",n(j(t.id,r)),n(w("Your comment was added successfully!","ok"))}catch(c){n(w("Error!"))}case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return t?c.a.createElement("div",{className:"blog-container"},c.a.createElement("div",{className:"blogview"},c.a.createElement("div",null,c.a.createElement("h2",{className:"blogview__title heading-2"},t.title,",\xa0\xa0",t.author)),c.a.createElement("div",{className:"blogview__info"},c.a.createElement("div",{className:"blogview__info--item"},c.a.createElement("a",{href:t.url},t.url)),c.a.createElement("div",{className:"blogview__info--item"},t.likes,"\xa0Likes\xa0\xa0\xa0",c.a.createElement("button",{onClick:l,className:"btn btn__like"},"like")),c.a.createElement("div",{className:"blogview__info--item"},"added by:\xa0",t.user.name))),c.a.createElement("div",{className:"comments"},c.a.createElement("div",{className:"comments__form"},c.a.createElement("form",{onSubmit:u},c.a.createElement("input",{name:"comment",id:"comment-input"}),c.a.createElement("button",{type:"submit",className:"btn__comment"},"add comment"))),c.a.createElement("h5",{className:"comments__head heading-3"},"comments:"),c.a.createElement("ul",{className:"comments__list"},t.comments.map(function(e){return c.a.createElement("li",{key:e.id,className:"comments__list--item comment_stripe-li"},e.comment)}))),function(){if(a.username===t.user.username)return c.a.createElement("button",{className:"btn btn__delete",onClick:function(){return s(t.id)}},"Delete: ",t.title)}()):null}),F=(a(74),function(e){var t=e.blogs;return c.a.createElement("div",{className:"blogs"},c.a.createElement("ul",{className:"blogs__list"},t.sort(function(e,t){return t.likes-e.likes}).map(function(e){return c.a.createElement("li",{key:e.id,className:"blogs__list--li stripe-li"},c.a.createElement(R.b,{className:"blogs__list--link",to:"/".concat(e.id)},e.title,",\xa0\xa0",e.author))})))}),J=(a(75),function(){var e=Object(o.c)(function(e){return e.notifications});return null===e?null:c.a.createElement("div",{className:"notification",style:{color:"ok"===e.type?"green":"red"}},e.message)}),W=(a(76),c.a.forwardRef(function(e,t){var a=Object(r.useState)(!1),n=Object(G.a)(a,2),s=n[0],l=n[1],o={display:s?"none":""},u={display:s?"":"none"},i=function(){l(!s)};return Object(r.useImperativeHandle)(t,function(){return{toggleVisibility:i}}),c.a.createElement("div",null,c.a.createElement("div",{style:o},c.a.createElement("button",{className:"btn btn__add",onClick:i},e.buttonLabel)),c.a.createElement("div",{style:u},e.children,c.a.createElement("button",{className:"btn btn__cancel",onClick:i},"cancel")))}));W.displayName="Togglable";var M=W,P=(a(77),function(){var e=Object(o.b)(),t=Object(r.useRef)(),a=function(){var a=Object(p.a)(f.a.mark(function a(n){var r,c,s;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n.preventDefault(),r=n.target.title.value,n.target.title.value="",c=n.target.author.value,n.target.author.value="",s=n.target.url.value,n.target.url.value="",t.current.toggleVisibility(),e(O(r,c,s)),e(w("A new blog:  '".concat(r,"' by: ").concat(c," has been added"),"ok"));case 10:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement(M,{buttonLabel:"add new content",className:"btn btn__add",ref:t},c.a.createElement("div",{className:"addContent"},c.a.createElement("div",null,c.a.createElement("h2",{className:"addContent__head heading-2"},"Add content:")),c.a.createElement("form",{className:"addContent__form",onSubmit:a},c.a.createElement("div",{className:"addContent__form--item"},"Title: ",c.a.createElement("input",{id:"title",name:"title",type:"text"})),c.a.createElement("div",{className:"addContent__form--item"},"Author: ",c.a.createElement("input",{id:"author",name:"author",type:"text"})),c.a.createElement("div",{className:"addContent__form--item"},"Url: ",c.a.createElement("input",{id:"url",name:"url",type:"text"})),c.a.createElement("button",{className:"btn btn__create",type:"submit"},"create")))))}),Y=(a(78),function(e){var t=e.handleSubmit,a=e.username,n=e.password,r=e.handleUsernameChange,s=e.handlePasswordChange;return c.a.createElement("div",{className:"loginForm"},c.a.createElement("h2",{className:"loginForm__title heading-2"},"Log in to application:"),c.a.createElement("form",{onSubmit:t},c.a.createElement("div",{className:"loginForm__item"},"username:",c.a.createElement("input",{id:"username",type:"text",value:a,placeholder:"\xa0\xa0for access type: test ",name:"Username",onChange:r})),c.a.createElement("div",{className:"loginForm__item"},"password:",c.a.createElement("input",{id:"password",type:"password",value:n,placeholder:"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 type: user ",name:"Password",onChange:s})),c.a.createElement("button",{className:"btn btn__login",type:"submit"},"login")))}),z=(a(79),function(e){var t=e.users;return console.log("users in UserList: ",t),c.a.createElement("div",{className:"users"},c.a.createElement("h2",{className:"users__header heading-2"},"Users:"),c.a.createElement("table",{className:"users__table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"th"}),c.a.createElement("th",{className:"th users__table--title heading-3"},"blogs created:"))),c.a.createElement("tbody",null,t.map(function(e){return c.a.createElement("tr",{key:e.id,className:"tr users__list"},c.a.createElement("td",{className:"td users__list--items"},c.a.createElement(R.b,{to:"/users/".concat(e.id),className:"users__list--link"},e.name)),c.a.createElement("td",{className:"td users__table--totals"},e.blogs.length))}))))}),K=(a(80),function(e){var t=e.user;return t?c.a.createElement("div",{className:"user"},c.a.createElement("h2",{className:"user__name heading-2"},t.name),c.a.createElement("h5",{className:"user__name--added heading-3"},"added blogs:"),c.a.createElement("ul",{className:"user__bloglist"},t.blogs.map(function(e){return c.a.createElement("li",{key:e.id,className:"user__bloglist--item user-stripe-li"},e.title)}))):null}),V=(a(81),function(){return c.a.createElement("div",{className:"footer heading-3"},c.a.createElement("em",null,"blogSaver app, by Jonathan Dennis 2021"))}),q={login:function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},H=(a(82),function(){var e=Object(r.useState)(""),t=Object(G.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(""),l=Object(G.a)(s,2),u=l[0],i=l[1],m=Object(o.c)(function(e){return e.blogs}),d=Object(o.c)(function(e){return e.loggedUser}),v=Object(o.c)(function(e){return e.users}),g=Object(o.b)(),b=Object(B.f)();Object(r.useEffect)(function(){g(function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.getAll();case 3:a=e.sent,t({type:"INIT_BLOGS",data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(w("Error getting blogs!"));case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}())},[g]),Object(r.useEffect)(function(){g(function(){var e=window.localStorage.getItem("loggedBlogappUser");return function(){var t=Object(p.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e&&(n=JSON.parse(e),N.setToken(n.token),a({type:"INIT_LOGGEDUSER",data:n}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}())},[g]),Object(r.useEffect)(function(){g(function(){var e=Object(p.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:a=e.sent,t({type:"INIT_USERS",data:a});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},[g]);var E=function(){var e=Object(p.a)(f.a.mark(function e(t){var r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("logging in with",a,u),e.prev=2,e.next=5,q.login({username:a,password:u});case 5:r=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(r)),N.setToken(r.token),g(S()),n(""),i(""),g(w("".concat(r.name," has been sucessfully logged in."),"ok")),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),g(w("Wrong username or password")),n(""),i("");case 19:case"end":return e.stop()}},e,null,[[2,14]])}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedBlogappUser",JSON.stringify(d)),g(function(){var e=Object(p.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SET_LOGGEDUSERNULL",data:null});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),b.push("/"),g(w("".concat(d.name," has been sucessfully logged out."),"ok"));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),_=Object(B.g)("/:id"),y=_?m.find(function(e){return e.id===String(_.params.id)}):null,O=Object(B.g)("/users/:id"),k=O?v.find(function(e){return e.id===String(O.params.id)}):null;return null===d?c.a.createElement("div",null,c.a.createElement("main",null,c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header__title"},c.a.createElement("h1",{className:"heading-1"},"<blogSaver app>")),c.a.createElement("div",{className:"header__text"},c.a.createElement("h4",{className:"heading-3"},"// This is a repository for continued learning. To enter new content, please sign in."))),c.a.createElement(J,null),c.a.createElement(Y,{username:a,password:u,handleUsernameChange:function(e){var t=e.target;return n(t.value)},handlePasswordChange:function(e){var t=e.target;return i(t.value)},handleSubmit:E}),c.a.createElement("footer",null,c.a.createElement(V,null)))):c.a.createElement("div",null,c.a.createElement("header",{className:"header"},c.a.createElement(D,{className:"header__nav",loggedUser:d,handleLogout:h}),c.a.createElement("div",{className:"header__title"},c.a.createElement("h1",{className:"heading-1"},"<blogSaver app>")),c.a.createElement("div",{className:"header__text"},c.a.createElement("h4",{className:"heading-3"},"// This is a repository for continued learning and skills development."),c.a.createElement("h4",{className:"heading-3"},"// Add, like, delete, and comment on content for future reference."))),c.a.createElement("main",null,c.a.createElement(J,null),c.a.createElement(B.c,null,c.a.createElement(B.a,{path:"/users/:id"},c.a.createElement(K,{user:k})),c.a.createElement(B.a,{path:"/users"},c.a.createElement(z,{users:v})),c.a.createElement(B.a,{path:"/:id"},c.a.createElement(A,{blog:y,loggedUser:d})),c.a.createElement(B.a,{path:"/"},c.a.createElement(P,{loggedUser:d}),c.a.createElement(F,{blogs:m}))),c.a.createElement("footer",null,c.a.createElement(V,null))))});a(83),a(84),a(85);l.a.render(c.a.createElement(o.a,{store:C},c.a.createElement(R.a,null,c.a.createElement(H,null))),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.31866722.chunk.js.map